[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "DSAN 5100 Final Project",
    "section": "",
    "text": "[fully explain and describe the problem, why it matters, guiding questions]\nThis project uses probabilistic modeling and statistical hypothesis testing to investigate whether pre-existing chronic conditions — specifically hypertension and diabetes — impact pregnancy and birth outcomes, such as gestational duration (preterm vs. full-term), delivery method (vaginal vs. cesarean), and neonatal health indicators (birth weight, APGAR scores, NICU admission). This addresses a clinically significant question with clear public health implications.\n\n\n\n \n\nThis project uses the Vital Statistics Natality Birth Data (National Center for Health Statistics 2024), which uses natality data from the National Vital Statistics System of the National Center for Health Statistics and is distributed by the National Bureau of Economic Research (NBER). The dataset includes demographic data — such as date of birth, age and educational attainment of parents, marital status, live-birth order, race, sex, and geographic area — and health data — including birth weight, gestation, prenatal care, attendant at birth, and Apgar score — for births occurring during the calendar year.\nThe full dataset contains 237 features across 3,638,436 rows/items. For this project, our data is a random sample of this full dataset of 10,000 rows, subsetted down to 43 features. The features capture the main maternal conditions/risk factors, primary birth outcomes of interest, and selected potential covariates such as mother’s race and age.\n\n\n\nPrior to analysis, we clean the data and peform exploratory data analysis in Python and R to understand the structure, distributions, and relationships of all of the features of the Natality dataset. The EDA captures in various data visualizations that can be found on the Exploratory Data Analysis page.\n\n\n\nWe perform various types of hypothesis testing methods in R to ____. These analyses can be found on the Hypothesis Testing page.\n\nt-tests\nChi-square tests\nBootstrap methods\nANOVA\n\n\n\n\nWe also perform time series analysis on two time-varying variables from the supplemental dataset, TBD. For this data, we perfom separate time series exploratory data analysis, fit appropriate ARIMA models to the data, and evaluate the models with model diagnostic techniques. The time series analysis is located in the Time Series tab.\n\n\n\nThe findings of our analyses culminate in a written report that can be found in the Report tab.\n \n\n\n\n\n\n\n\nTwo-sample t-tests (for comparing mean values of two groups to see if difference is significant)\n\nIdeas:\n\nCompare average gestational age between mothers with vs. without hypertension\nCompare mean birth weights between diabetic vs. non-diabetic mothers\n\nChi-square Test for independence (if 2 variables are categorical associated or independent)\n\nIdeas:\n\nTest if delivery type (vaginal/cesarean) is independent of diabetes status\nTest association between having chronic condition and preterm birth (yes/no)\n\n\nMonte Carlo Simulation\n\nGenerate predicted distributions of birth weights given maternal health conditions\nSimulate pregnancy outcomes under different chronic condition prevalence scenarios\n\n\n\n\nHypothesis Testing (use each at least once or twice):\n\nt-tests\nChi-square tests\nBootstrap methods\nANOVA\nIf any assumption is violated (e.g., normality, equal variances), choose the appropriate non-parametric alternative. Make sure to do the relevant tests to see if these assumptions violates.\n\n\nTime Series Analysis:\n\nYou must analyze at least two time-varying variables.\nUse appropriate time-series modeling techniques (e.g., ARIMA, TS EDA).\nModel Diagnostics"
  },
  {
    "objectID": "index.html#data",
    "href": "index.html#data",
    "title": "DSAN 5100 Final Project",
    "section": "",
    "text": "This project uses the Vital Statistics Natality Birth Data (National Center for Health Statistics 2024), which uses natality data from the National Vital Statistics System of the National Center for Health Statistics and is distributed by the National Bureau of Economic Research (NBER). The dataset includes demographic data — such as date of birth, age and educational attainment of parents, marital status, live-birth order, race, sex, and geographic area — and health data — including birth weight, gestation, prenatal care, attendant at birth, and Apgar score — for births occurring during the calendar year.\nThe full dataset contains 237 features across 3,638,436 rows/items. For this project, our data is a random sample of this full dataset of 10,000 rows, subsetted down to 43 features. The features capture the main maternal conditions/risk factors, primary birth outcomes of interest, and selected potential covariates such as mother’s race and age."
  },
  {
    "objectID": "index.html#exploratory-data-analysis",
    "href": "index.html#exploratory-data-analysis",
    "title": "DSAN 5100 Final Project",
    "section": "",
    "text": "Prior to analysis, we clean the data and peform exploratory data analysis in Python and R to understand the structure, distributions, and relationships of all of the features of the Natality dataset. The EDA captures in various data visualizations that can be found on the Exploratory Data Analysis page."
  },
  {
    "objectID": "index.html#statistical-methods",
    "href": "index.html#statistical-methods",
    "title": "DSAN 5100 Final Project",
    "section": "",
    "text": "We perform various types of hypothesis testing methods in R to ____. These analyses can be found on the Hypothesis Testing page.\n\nt-tests\nChi-square tests\nBootstrap methods\nANOVA"
  },
  {
    "objectID": "index.html#time-series-analysis",
    "href": "index.html#time-series-analysis",
    "title": "DSAN 5100 Final Project",
    "section": "",
    "text": "We also perform time series analysis on two time-varying variables from the supplemental dataset, TBD. For this data, we perfom separate time series exploratory data analysis, fit appropriate ARIMA models to the data, and evaluate the models with model diagnostic techniques. The time series analysis is located in the Time Series tab."
  },
  {
    "objectID": "index.html#report",
    "href": "index.html#report",
    "title": "DSAN 5100 Final Project",
    "section": "",
    "text": "The findings of our analyses culminate in a written report that can be found in the Report tab.\n \n\n\n\n\n\n\n\nTwo-sample t-tests (for comparing mean values of two groups to see if difference is significant)\n\nIdeas:\n\nCompare average gestational age between mothers with vs. without hypertension\nCompare mean birth weights between diabetic vs. non-diabetic mothers\n\nChi-square Test for independence (if 2 variables are categorical associated or independent)\n\nIdeas:\n\nTest if delivery type (vaginal/cesarean) is independent of diabetes status\nTest association between having chronic condition and preterm birth (yes/no)\n\n\nMonte Carlo Simulation\n\nGenerate predicted distributions of birth weights given maternal health conditions\nSimulate pregnancy outcomes under different chronic condition prevalence scenarios\n\n\n\n\nHypothesis Testing (use each at least once or twice):\n\nt-tests\nChi-square tests\nBootstrap methods\nANOVA\nIf any assumption is violated (e.g., normality, equal variances), choose the appropriate non-parametric alternative. Make sure to do the relevant tests to see if these assumptions violates.\n\n\nTime Series Analysis:\n\nYou must analyze at least two time-varying variables.\nUse appropriate time-series modeling techniques (e.g., ARIMA, TS EDA).\nModel Diagnostics"
  },
  {
    "objectID": "eda/eda_akshay.html",
    "href": "eda/eda_akshay.html",
    "title": "DSAN 5100 Final Project",
    "section": "",
    "text": "import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n\nnatality_df = pd.read_csv('../data/cleaned/natality_cleaned.csv')\n\nnatality_df.head()\n\n\n\n\n\n\n\n\nbfacil\nmager\nmrace6\ndmar\nmeduc\nprecare\nbmi\nrf_pdiab\nrf_gdiab\nrf_phype\n...\nsex\ncombgest\ndbwt\nab_aven1\nab_aven6\nab_nicu\nab_surf\nab_anti\nab_seiz\nno_abnorm\n\n\n\n\n0\nHospital\n26\nWhite\nUnmarried\nSome college credit, not a degree\n6\n24.200001\nFalse\nFalse\nFalse\n...\nF\n39\n3150\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n1\nHospital\n20\nWhite\nUnmarried\nSome college credit, not a degree\n1\n20.400000\nFalse\nFalse\nFalse\n...\nF\n41\n2466\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n2\nHospital\n29\nAsian\nMarried\nDoctorate\n2\n19.500000\nFalse\nFalse\nFalse\n...\nF\n39\n2620\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n3\nHospital\n18\nWhite\nMarried\n9th-12th no diploma\n4\n33.400002\nFalse\nFalse\nFalse\n...\nM\n40\n3360\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n4\nOther\n25\nWhite\nMarried\nSome college credit, not a degree\n4\n23.000000\nFalse\nFalse\nFalse\n...\nM\n39\n2930\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n\n\n5 rows × 43 columns\n\n\n\n\nprint(natality_df.shape)\nprint(\"--------\")\nprint(natality_df.columns)\n\n(10000, 43)\n--------\nIndex(['bfacil', 'mager', 'mrace6', 'dmar', 'meduc', 'precare', 'bmi',\n       'rf_pdiab', 'rf_gdiab', 'rf_phype', 'rf_ghype', 'rf_ehype', 'no_risks',\n       'ip_gon', 'ip_syph', 'ip_chlam', 'ip_hepb', 'ip_hepc', 'no_infec',\n       'ld_indl', 'ld_augm', 'ld_ster', 'ld_antb', 'ld_chor', 'ld_anes',\n       'me_rout', 'mm_mtr', 'mm_plac', 'mm_rupt', 'mm_uhyst', 'mm_aicu',\n       'apgar5', 'dplural', 'sex', 'combgest', 'dbwt', 'ab_aven1', 'ab_aven6',\n       'ab_nicu', 'ab_surf', 'ab_anti', 'ab_seiz', 'no_abnorm'],\n      dtype='object')\n\n\n\nnatality_df.dtypes\n\nbfacil        object\nmager          int64\nmrace6        object\ndmar          object\nmeduc         object\nprecare        int64\nbmi          float64\nrf_pdiab        bool\nrf_gdiab        bool\nrf_phype        bool\nrf_ghype        bool\nrf_ehype        bool\nno_risks        bool\nip_gon          bool\nip_syph         bool\nip_chlam        bool\nip_hepb         bool\nip_hepc         bool\nno_infec        bool\nld_indl         bool\nld_augm         bool\nld_ster         bool\nld_antb         bool\nld_chor         bool\nld_anes         bool\nme_rout       object\nmm_mtr          bool\nmm_plac         bool\nmm_rupt         bool\nmm_uhyst        bool\nmm_aicu         bool\napgar5         int64\ndplural        int64\nsex           object\ncombgest       int64\ndbwt           int64\nab_aven1        bool\nab_aven6        bool\nab_nicu         bool\nab_surf         bool\nab_anti         bool\nab_seiz         bool\nno_abnorm       bool\ndtype: object\n\n\n\nbool_df = natality_df.select_dtypes(include=['bool'])\n\nbool_df.head()\n\n\n\n\n\n\n\n\n\nrf_pdiab\nrf_gdiab\nrf_phype\nrf_ghype\nrf_ehype\nno_risks\nip_gon\nip_syph\nip_chlam\nip_hepb\n...\nmm_rupt\nmm_uhyst\nmm_aicu\nab_aven1\nab_aven6\nab_nicu\nab_surf\nab_anti\nab_seiz\nno_abnorm\n\n\n\n\n0\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\nFalse\nFalse\nFalse\nFalse\n...\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n1\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\nFalse\nFalse\nFalse\nFalse\n...\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n2\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\nFalse\nFalse\nFalse\nFalse\n...\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n3\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\nFalse\nFalse\nFalse\nFalse\n...\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n4\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\nFalse\nFalse\nFalse\nFalse\n...\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n\n\n5 rows × 30 columns\n\n\n\n\nbool_df.shape\n\n(10000, 30)\n\n\n\nnatality_df['mrace6'].unique()\n\narray(['White', 'Asian', 'Black', 'More than one race',\n       'American Indian or Alaska Native',\n       'Native Hawaiian and Other Pacific Islander'], dtype=object)\n\n\n\nnatality_df['meduc'].unique()\n\narray(['Some college credit, not a degree', 'Doctorate',\n       '9th-12th no diploma', \"Bachelor's degree\", \"Master's degree\",\n       'High school graduate or GED completed', 'Associate degree',\n       '8th grade or less'], dtype=object)\n\n\n\nnatality_df['me_rout'].unique()\n\narray(['Spontaneous', 'Cesarean', 'Vacuum', 'Forceps'], dtype=object)\n\n\n\nnatality_df['dmar'].unique()\n\narray(['Unmarried', 'Married'], dtype=object)\n\n\n\nbool_df.columns\n\nIndex(['rf_pdiab', 'rf_gdiab', 'rf_phype', 'rf_ghype', 'rf_ehype', 'no_risks',\n       'ip_gon', 'ip_syph', 'ip_chlam', 'ip_hepb', 'ip_hepc', 'no_infec',\n       'ld_indl', 'ld_augm', 'ld_ster', 'ld_antb', 'ld_chor', 'ld_anes',\n       'mm_mtr', 'mm_plac', 'mm_rupt', 'mm_uhyst', 'mm_aicu', 'ab_aven1',\n       'ab_aven6', 'ab_nicu', 'ab_surf', 'ab_anti', 'ab_seiz', 'no_abnorm'],\n      dtype='object')\n\n\n\nnatality_df.select_dtypes(include=['int64','float64']).columns\n\nIndex(['mager', 'precare', 'bmi', 'apgar5', 'dplural', 'combgest', 'dbwt'], dtype='object')\n\n\n\nnatality_df['bfacil'].unique()\n\narray(['Hospital', 'Other', 'Home (intended)',\n       'Freestanding Birth Center', 'Home (not intended)',\n       \"Clinic / Doctor's Office\"], dtype=object)\n\n\n\ndef plot_boxplot(data, column, colname, unit, output_path=None):\n    sns.boxplot(x=data[column])\n    plt.xlabel(unit)\n    plt.title(f\"Distribution of {colname}\")\n    if output_path:\n        plt.savefig(output_path)\n    plt.show()\n\n\nplot_boxplot(natality_df, 'mager',\"Mother's Age\", \"Years\", \"../plots/eda/maternal_age_boxplot.png\")\n\n\n\n\n\n\n\n\n\nplot_boxplot(natality_df, 'dbwt', 'Birth Weight', 'Grams', \"../plots/eda/birth_weight_boxplot.png\")\n\n\n\n\n\n\n\n\n\nplt.hist(natality_df['apgar5'],bins=10)\nplt.xlabel(\"APGAR Score\")\nplt.ylabel(\"Frequency\")\nplt.title(\"Distribution of APGAR Scores at 5 Minutes Post-Birth\")\nplt.savefig(\"../plots/eda/apgar_histogram.png\")\nplt.show()\n\n\n\n\n\n\n\n\n\nplot_boxplot(natality_df, 'bmi', 'Maternal BMI', 'BMI', \"../plots/eda/maternal_bmi_boxplot.png\")\n\n\n\n\n\n\n\n\n\ndef plot_piechart(data, column, title, output_path=None):   \n    counts = natality_df[column].value_counts()\n\n    fig, ax = plt.subplots()\n\n    wedges, texts, autotexts = ax.pie(\n        counts,\n        labels=None,              # no labels on slices\n        autopct='%1.1f%%'\n    )\n\n    ax.legend(\n        wedges,\n        counts.index,\n        loc=\"center left\",\n        bbox_to_anchor=(1, 0.5) \n    )\n\n    plt.title(f\"Distribution of {title}\")\n    plt.tight_layout()\n    if output_path:\n        plt.savefig(output_path)\n    plt.show()\n\n\nplot_piechart(natality_df, 'mrace6', \"Racial Groups\", \"../plots/eda/pie_charts/racial_groups_piechart.png\")\n\n\n\n\n\n\n\n\n\nplot_piechart(natality_df, 'bfacil', 'Birth Facility Type', '../plots/eda/pie_charts/faciltiy_type_piechart.png')\n\n\n\n\n\n\n\n\n\nplot_piechart(natality_df, 'dmar',\"Maternal Marital Status\", \"../plots/eda/pie_charts/marital_status_piechart.png\")\n\n\n\n\n\n\n\n\n\nplot_piechart(natality_df, 'meduc', \"Maternal Education Level\", \"../plots/eda/pie_charts/education_level_piechart.png\")\n\n\n\n\n\n\n\n\n\nplot_piechart(natality_df, 'me_rout', \"Delivery Method\", \"../plots/eda/pie_charts/delivery_method_piechart.png\")"
  },
  {
    "objectID": "eda/eda_alison.html",
    "href": "eda/eda_alison.html",
    "title": "Exploratory Data Analysis (EDA): Multivariate",
    "section": "",
    "text": "import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom scipy.stats import pointbiserialr\n\n\ndata = pd.read_csv('../data/cleaned/natality_cleaned.csv')\ndata.head()\n\n\n\n\n\n\n\n\nbfacil\nmager\nmrace6\ndmar\nmeduc\nprecare\nbmi\nrf_pdiab\nrf_gdiab\nrf_phype\n...\nsex\ncombgest\ndbwt\nab_aven1\nab_aven6\nab_nicu\nab_surf\nab_anti\nab_seiz\nno_abnorm\n\n\n\n\n0\nHospital\n26\nWhite\nUnmarried\nSome college credit, not a degree\n6\n24.200001\nFalse\nFalse\nFalse\n...\nF\n39\n3150\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n1\nHospital\n20\nWhite\nUnmarried\nSome college credit, not a degree\n1\n20.400000\nFalse\nFalse\nFalse\n...\nF\n41\n2466\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n2\nHospital\n29\nAsian\nMarried\nDoctorate\n2\n19.500000\nFalse\nFalse\nFalse\n...\nF\n39\n2620\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n3\nHospital\n18\nWhite\nMarried\n9th-12th no diploma\n4\n33.400002\nFalse\nFalse\nFalse\n...\nM\n40\n3360\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n4\nOther\n25\nWhite\nMarried\nSome college credit, not a degree\n4\n23.000000\nFalse\nFalse\nFalse\n...\nM\n39\n2930\nFalse\nFalse\nFalse\nFalse\nFalse\nFalse\nTrue\n\n\n\n\n5 rows × 43 columns\n\n\n\n\nData Overview\n\nprint(f\"Number of rows: {len(data)}\")\nprint(f\"\\nData types: {data.dtypes}\")\nprint(f\"\\nSummary stats: {data.describe()}\")\n\nNumber of rows: 10000\n\nData types: bfacil        object\nmager          int64\nmrace6        object\ndmar          object\nmeduc         object\nprecare        int64\nbmi          float64\nrf_pdiab        bool\nrf_gdiab        bool\nrf_phype        bool\nrf_ghype        bool\nrf_ehype        bool\nno_risks        bool\nip_gon          bool\nip_syph         bool\nip_chlam        bool\nip_hepb         bool\nip_hepc         bool\nno_infec        bool\nld_indl         bool\nld_augm         bool\nld_ster         bool\nld_antb         bool\nld_chor         bool\nld_anes         bool\nme_rout       object\nmm_mtr          bool\nmm_plac         bool\nmm_rupt         bool\nmm_uhyst        bool\nmm_aicu         bool\napgar5         int64\ndplural        int64\nsex           object\ncombgest       int64\ndbwt           int64\nab_aven1        bool\nab_aven6        bool\nab_nicu         bool\nab_surf         bool\nab_anti         bool\nab_seiz         bool\nno_abnorm       bool\ndtype: object\n\nSummary stats:               mager       precare           bmi       apgar5       dplural  \\\ncount  10000.000000  10000.000000  10000.000000  10000.00000  10000.000000   \nmean      29.443700      3.018100     27.439310      8.78930      1.024200   \nstd        5.790629      1.534017      6.170185      0.72647      0.154327   \nmin       13.000000      0.000000     13.600000      0.00000      1.000000   \n25%       25.000000      2.000000     22.700001      9.00000      1.000000   \n50%       30.000000      3.000000     26.400000      9.00000      1.000000   \n75%       34.000000      3.000000     31.200001      9.00000      1.000000   \nmax       47.000000     10.000000     45.599998     10.00000      3.000000   \n\n          combgest          dbwt  \ncount  10000.00000  10000.000000  \nmean      38.73120   3288.769000  \nstd        2.04479    480.981607  \nmin       24.00000   1960.000000  \n25%       38.00000   2980.000000  \n50%       39.00000   3300.000000  \n75%       40.00000   3620.000000  \nmax       47.00000   4593.000000  \n\n\n\n\nInspect Categorical Variables\n\n# rename w category tags: \n# _E = exposure, _O = outcome, _C = covariate, _X = other\nrename_map = {\n    \"bfacil\": \"birth_place_C\",\n    \"mager\": \"mother_age_C\",\n    \"mrace6\": \"mother_race_C\",\n    \"dmar\": \"marital_status_C\",\n    \"meduc\": \"mother_education_C\",\n    \"precare\": \"prenatal_care_month_C\",\n    \"bmi\": \"bmi_C\",\n    \"rf_pdiab\": \"risk_prepreg_diabetes_E\",\n    \"rf_gdiab\": \"risk_gest_diabetes_E\",\n    \"rf_phype\": \"risk_pre_hypertension_E\",\n    \"rf_ghype\": \"risk_gest_hypertension_E\",\n    \"rf_ehype\": \"risk_eclampsia_E\",\n    \"no_risks\": \"no_risks_reported_X\",\n    \"ip_gon\": \"infection_gonorrhea_E\",\n    \"ip_syph\": \"infection_syphilis_E\",\n    \"ip_chlam\": \"infection_chlamydia_E\",\n    \"ip_hepb\": \"infection_hepb_E\",\n    \"ip_hepc\": \"infection_hepc_E\",\n    \"no_infec\": \"no_infections_reported_X\",\n    \"ld_indl\": \"labor_induction_X\",\n    \"ld_augm\": \"labor_augmentation_X\",\n    \"ld_ster\": \"steroids_X\",\n    \"ld_antb\": \"antibiotics_X\",\n    \"ld_chor\": \"chorioamnionitis_X\",\n    \"ld_anes\": \"anesthesia_X\",\n    \"me_rout\": \"delivery_method_O\",\n    \"mm_mtr\": \"maternal_transfusion_X\",\n    \"mm_plac\": \"perineal_laceration_X\",\n    \"mm_rupt\": \"uterine_rupture_X\",\n    \"mm_uhyst\": \"unplanned_hysterectomy_X\",\n    \"mm_aicu\": \"admit_icu_X\",\n    \"apgar5\": \"apgar5_O\",\n    \"dplural\": \"multiples_count_C\",\n    \"sex\": \"infant_sex_C\",\n    \"combgest\": \"gestation_weeks_O\",\n    \"dbwt\": \"birth_weight_g_O\",\n    \"ab_aven1\": \"assist_vent_immediate_O\",\n    \"ab_aven6\": \"assist_vent_gt6hr_O\",\n    \"ab_nicu\": \"nicu_admission_O\",\n    \"ab_surf\": \"surfactant_O\",\n    \"ab_anti\": \"newborn_antibiotics_O\",\n    \"ab_seiz\": \"newborn_seizures_O\",\n    \"no_abnorm\": \"no_abnormal_conditions_X\"\n}\ndata = data.rename(columns=rename_map)\nprint(\"Columns now:\", list(data.columns))\n\nColumns now: ['birth_place_C', 'mother_age_C', 'mother_race_C', 'marital_status_C', 'mother_education_C', 'prenatal_care_month_C', 'bmi_C', 'risk_prepreg_diabetes_E', 'risk_gest_diabetes_E', 'risk_pre_hypertension_E', 'risk_gest_hypertension_E', 'risk_eclampsia_E', 'no_risks_reported_X', 'infection_gonorrhea_E', 'infection_syphilis_E', 'infection_chlamydia_E', 'infection_hepb_E', 'infection_hepc_E', 'no_infections_reported_X', 'labor_induction_X', 'labor_augmentation_X', 'steroids_X', 'antibiotics_X', 'chorioamnionitis_X', 'anesthesia_X', 'delivery_method_O', 'maternal_transfusion_X', 'perineal_laceration_X', 'uterine_rupture_X', 'unplanned_hysterectomy_X', 'admit_icu_X', 'apgar5_O', 'multiples_count_C', 'infant_sex_C', 'gestation_weeks_O', 'birth_weight_g_O', 'assist_vent_immediate_O', 'assist_vent_gt6hr_O', 'nicu_admission_O', 'surfactant_O', 'newborn_antibiotics_O', 'newborn_seizures_O', 'no_abnormal_conditions_X']\n\n\n\n# show numpy arrays of uniques\n# make dplural, precare columns categorical\ndata['multiples_count_C'] = data['multiples_count_C'].astype('category')\ndata['prenatal_care_month_C'] = data['prenatal_care_month_C'].astype('category')\ndata['apgar5_O'] = data['apgar5_O'].astype('category')\ndata.select_dtypes(include=['object', 'category']).apply(lambda x: x.unique())\n\nbirth_place_C            [Hospital, Other, Home (intended), Freestandin...\nmother_race_C            [White, Asian, Black, More than one race, Amer...\nmarital_status_C                                      [Unmarried, Married]\nmother_education_C       [Some college credit, not a degree, Doctorate,...\nprenatal_care_month_C    [6, 1, 2, 4, 9, ..., 0, 7, 5, 8, 10]\nLength: 1...\ndelivery_method_O                 [Spontaneous, Cesarean, Vacuum, Forceps]\napgar5_O                 [9, 8, 6, 10, 7, ..., 1, 2, 5, 3, 0]\nLength: 1...\nmultiples_count_C               [1, 2, 3]\nCategories (3, int64): [1, 2, 3]\ninfant_sex_C                                                        [F, M]\ndtype: object\n\n\n\n\nNumerical Variables\n\nnum_df = data.select_dtypes(include=['int64', 'float64'])\nnum_df.head()\n\n\n\n\n\n\n\n\nmother_age_C\nbmi_C\ngestation_weeks_O\nbirth_weight_g_O\n\n\n\n\n0\n26\n24.200001\n39\n3150\n\n\n1\n20\n20.400000\n41\n2466\n\n\n2\n29\n19.500000\n39\n2620\n\n\n3\n18\n33.400002\n40\n3360\n\n\n4\n25\n23.000000\n39\n2930\n\n\n\n\n\n\n\n\n\nPairplot\n\n# pairplot of sample\npairplot = sns.pairplot(num_df.sample(n=3000, random_state=5100))\nplt.savefig(\"../plots/eda/multivar/pairplot_natality_numeric_sample.png\", dpi=300)\n\n\n\n\n\n\n\n\n\n\nProportions/Frequencies\n\n# For binary outcomes\nfor outcome in ['assist_vent_immediate_O', 'nicu_admission_O', 'newborn_seizures_O']:\n    prop_table = pd.crosstab(\n        data[['risk_prepreg_diabetes_E', 'risk_pre_hypertension_E']].any(axis=1),\n        data[outcome],\n        normalize='index'\n    )\n    print(f\"\\n{outcome}:\")\n    print(prop_table)\n    \n# Visualize\nfig, axes = plt.subplots(2, 3, figsize=(15, 12))\nplt.subplots_adjust(hspace=0.4)\n\nfor idx, outcome in enumerate(['assist_vent_immediate_O', 'nicu_admission_O', 'newborn_seizures_O']):\n    for jdx, exposure in enumerate(['risk_prepreg_diabetes_E', 'risk_pre_hypertension_E']):\n        ax = axes[jdx, idx]\n        pd.crosstab(data[exposure], data[outcome], normalize='index').plot(\n            kind='bar', ax=ax, legend=True\n        )\n        ax.set_title(f'{outcome}\\nby {exposure}')\n        ax.set_ylabel('Proportion') \n\nplt.savefig(\"../plots/eda/multivar/crosstab_natality_exposures_outcomes.png\", dpi=300)\n\n\nassist_vent_immediate_O:\nassist_vent_immediate_O     False     True \nrow_0                                      \nFalse                    0.947066  0.052934\nTrue                     0.902844  0.097156\n\nnicu_admission_O:\nnicu_admission_O     False     True \nrow_0                               \nFalse             0.926289  0.073711\nTrue              0.836493  0.163507\n\nnewborn_seizures_O:\nnewborn_seizures_O     False     True \nrow_0                                 \nFalse               0.999374  0.000626\nTrue                1.000000  0.000000\n\n\n\n\n\n\n\n\n\n\n\nHeatmap\n\nexposure_vars = ['risk_prepreg_diabetes_E', 'risk_gest_diabetes_E', 'risk_pre_hypertension_E', 'risk_gest_hypertension_E', 'risk_eclampsia_E']\n\n# Calculate raw proportion differences (no testing yet)\ndef prop_difference(data, exposure, outcome, outcome_value=True):\n    # Calculate difference in outcome proportion between exposed/unexposed\n    exposed = data[data[exposure] == True][outcome].mean()\n    unexposed = data[data[exposure] == False][outcome].mean()\n    return exposed - unexposed\n\n# heatmap of proportion differences\ncategorical_outcomes = ['assist_vent_immediate_O', 'nicu_admission_O', \n                       'newborn_seizures_O', 'assist_vent_gt6hr_O', 'surfactant_O', 'newborn_antibiotics_O'] # surfactant_O, newborn_antibiotics_O\n\nprop_diff_matrix = pd.DataFrame(index=exposure_vars, \n                                columns=categorical_outcomes)\n\nfor exposure in exposure_vars:\n    for outcome in categorical_outcomes:\n        diff = prop_difference(data, exposure, outcome)\n        prop_diff_matrix.loc[exposure, outcome] = diff\n\nsns.heatmap(prop_diff_matrix.astype(float), annot=True, cmap='RdBu_r',\n            center=0, fmt='.3f')\nplt.title('Difference in Outcome Proportions\\n(Exposed - Unexposed)')\nplt.savefig(\"../plots/eda/multivar/prop_diff_heatmap_natality.png\", dpi=300)\n\n\n\n\n\n\n\n\n\n\nAPGAR score distribution\n\nfig, axes = plt.subplots(2, 3, figsize=(15, 10))\naxes = axes.flatten() # flatten, use single index for iteration\n\nfor i, exposure in enumerate(exposure_vars):\n    ax = axes[i]\n    data.groupby(exposure)['apgar5_O'].value_counts(normalize=True).unstack().plot(\n        kind='bar', stacked=True, ax=ax\n    )\n    ax.set_title(f'APGAR Score Distribution by {exposure}')\n    ax.set_ylabel('Proportion')\n\n# remove unused subplot\naxes[5].axis('off')\n\nplt.tight_layout()\nplt.savefig(\"../plots/eda/multivar/apgar_by_exposures_natality.png\", dpi=300)\n\n\n\n\n\n\n\n\n\n\nBoxplots of Continuous Outcomes by Condition/Exposure\n\nfig, axes = plt.subplots(2, 2, figsize=(12, 10))\nplt.subplots_adjust(hspace=0.35, wspace=0.3)\n\ncontinuous_outcomes = ['birth_weight_g_O', 'gestation_weeks_O']\nmain_exposures = ['risk_prepreg_diabetes_E', 'risk_pre_hypertension_E']\n\nfor idx, outcome in enumerate(continuous_outcomes):\n    for jdx, exposure in enumerate(main_exposures):\n        ax = axes[idx, jdx]\n        data.boxplot(column=outcome, by=exposure, ax=ax)\n        ax.set_title(f'{outcome} by {exposure}')\n        ax.set_xlabel('')\n        ax.set_ylabel(outcome.replace('_O', '').replace('_', ' ').title())\n        plt.sca(ax)\n        plt.xticks([1, 2], ['No', 'Yes'])\n\nplt.suptitle('')  # remove automatic suptitle \nplt.tight_layout()\nplt.savefig(\"../plots/eda/multivar/boxplots_natality_exposures_outcomes.png\", dpi=300)\n\n\n\n\n\n\n\n\n\n\nREMOVE: Violin/Box Plots\n\n# violin / box plots to explore exposures -&gt; outcomes with optional covariates\n\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# quick lists\nexposures = [\n    \"risk_gest_diabetes_E\",\n    \"risk_gest_hypertension_E\",\n    \"risk_eclampsia_E\"\n]\n\noutcomes = [\n    \"gestation_weeks_O\",\n    \"birth_weight_g_O\",\n    \"apgar5_O\",\n    \"nicu_admission_O\" \n]\ncovariates = [\n    \"mother_age_C\",\n    \"mother_race_C\",\n    \"bmi_C\"\n]\n\ndef plot_exposure_vs_outcome(df, exposure, outcome, covariate = None, sample_n = 4000):\n    # copy & drop na\n    sub = df[[exposure, outcome] + ([covariate] if covariate else [])].dropna()\n    if sub.empty:\n        print(f\"No data for {exposure} x {outcome} (after dropna).\")\n        return\n    # convert boolean exposures to int for grouping\n    if pd.api.types.is_bool_dtype(sub[exposure]) or sub[exposure].dtype.name == 'boolean':\n        sub[exposure] = sub[exposure].astype(int).astype(str)  # 0/1 categories\n    else:\n        sub[exposure] = sub[exposure].astype(str)\n    # handle covariate: if numeric, bin into quartiles; if too many categories, ignore hue\n    hue = None\n    if covariate and covariate in sub.columns:\n        if pd.api.types.is_numeric_dtype(sub[covariate]):\n            try:\n                sub[covariate + \"_bin\"] = pd.qcut(sub[covariate], q=4, duplicates='drop').astype(str)\n                hue = covariate + \"_bin\"\n            except Exception:\n                hue = None\n        else:\n            if sub[covariate].nunique() &lt;= 8:\n                hue = covariate\n            else:\n                hue = None\n    # for speed\n    if len(sub) &gt; sample_n:\n        sub = sub.sample(sample_n, random_state = 5100)\n    # plot\n    plt.figure(figsize = (8,6))\n    sns.violinplot(x = exposure, y = outcome, hue = hue, data = sub, inner = 'quartile', cut = 0)\n    title = f\"{outcome} by {exposure}\" + (f\" (hue={hue})\" if hue else \"\")\n    plt.title(title)\n\n    # save\n    # plt_filename = f\"../plots/eda/multivar/plot_{exposure}_vs_{outcome}\" + (f\"_by_{hue}\" if hue else \"\") + \".png\"\n    # plt.savefig(plt_filename)\n    # plt.show()\n\n# generate a small grid of plots: each exposure x a couple of outcomes, with two covariates shown\n# plot_covariates = [\"infant_sex_C\", \"mother_race_C\"]\nfor exp in exposures:\n    for out in outcomes:\n        # first without covariate\n        plot_exposure_vs_outcome(data, exp, out, covariate=None)\n        # then with covariates (if present)\n        for cov in covariates:\n            plot_exposure_vs_outcome(data, exp, out, covariate=cov)\n\n\nbool_cols = data.select_dtypes(include=['bool']).columns\nnum_cols = data.select_dtypes(include=['int64','float64']).columns\npb = pd.DataFrame(index=bool_cols, columns=num_cols, dtype=float)\nfor b in bool_cols:\n    for ncol in num_cols:\n        try:\n            r, p = pointbiserialr(data[b].astype(int), data[ncol].fillna(data[ncol].median()))\n        except Exception:\n            r = np.nan\n        pb.loc[b, ncol] = r\n\nplt.figure(figsize = (10,6))\nsns.heatmap(pb.astype(float), center=0, cmap='coolwarm')\nplt.title(\"Point-biserial correlation (bool vs numeric)\")\n\n# plt.show()"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site"
  }
]